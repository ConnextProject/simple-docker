"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const utils_1 = require("ethers/utils");
const bigNumbers_1 = require("./bigNumbers");
const strings_1 = require("./strings");
exports.bigNumberifyJson = (json) => typeof json === "string"
    ? json
    : JSON.parse(JSON.stringify(json), (key, value) => value && value["_hex"] ? bigNumbers_1.toBN(value._hex) : value);
exports.deBigNumberifyJson = (json) => JSON.parse(JSON.stringify(json), (key, val) => val && bigNumbers_1.isBN(val) ? val.toHexString() : val);
exports.stringify = (value, abrv = false, spaces = 2) => JSON.stringify(value, (key, value) => value && value._hex
    ? utils_1.bigNumberify(value).toString()
    : abrv && value && typeof value === "string" && value.startsWith("indra")
        ? strings_1.abbreviate(value, 5)
        : abrv && value && typeof value === "string" && value.startsWith("0x") && value.length > 12
            ? strings_1.abbreviate(value)
            : value, spaces);
const nullify = (key, value) => typeof value === "undefined" ? null : value;
exports.safeJsonStringify = (value) => {
    try {
        return typeof value === "string" ? value : JSON.stringify(value, nullify);
    }
    catch (e) {
        console.log(`Failed to safeJsonstringify value ${value}: ${e.message}`);
        return value;
    }
};
exports.safeJsonParse = (value) => {
    try {
        return typeof value === "string" ? JSON.parse(value, nullify) : value;
    }
    catch (e) {
        console.log(`Failed to safeJsonParse value ${value}: ${e.message}`);
        return value;
    }
};
//# sourceMappingURL=json.js.map